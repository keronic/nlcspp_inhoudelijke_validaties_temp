<?xml version="1.0" encoding="UTF-8"?><stylesheet xmlns="http://www.w3.org/1999/XSL/Transform" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:keronic="http://example.com/my-functions" xmlns:nlcs="NLCSnetbeheer" xmlns:svrl="http://purl.oclc.org/dsdl/svrl" xmlns:xs="http://www.w3.org/2001/XMLSchema" version="3.0" expand-text="false"><variable name="Q{http://dmaus.name/ns/2023/schxslt}phase" as="Q{http://www.w3.org/2001/XMLSchema}string" select="'#ALL'"/><xsl:include xmlns="http://purl.oclc.org/dsdl/schematron" xmlns:math="http://www.w3.org/2005/xpath-functions/math" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" href="../xsl_functions/global_functions/config_functions.xsl"/><xsl:include xmlns="http://purl.oclc.org/dsdl/schematron" xmlns:math="http://www.w3.org/2005/xpath-functions/math" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" href="../xsl_functions/helper_functions/helper_functions.xsl"/><xsl:include xmlns="http://purl.oclc.org/dsdl/schematron" xmlns:math="http://www.w3.org/2005/xpath-functions/math" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" href="../xsl_functions/geometry_functions/2d_geometry_functions.xsl"/><xsl:include xmlns="http://purl.oclc.org/dsdl/schematron" xmlns:math="http://www.w3.org/2005/xpath-functions/math" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" href="../xsl_functions/geometry_functions/3d_geometry_functions.xsl"/><xsl:include xmlns="http://purl.oclc.org/dsdl/schematron" xmlns:math="http://www.w3.org/2005/xpath-functions/math" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" href="../xsl_functions/geometry_functions/2d_geometry_interface_functions.xsl"/><xsl:include xmlns="http://purl.oclc.org/dsdl/schematron" xmlns:math="http://www.w3.org/2005/xpath-functions/math" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" href="../xsl_functions/geometry_functions/3d_geometry_interface_functions.xsl"/><xsl:include xmlns="http://purl.oclc.org/dsdl/schematron" xmlns:math="http://www.w3.org/2005/xpath-functions/math" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" href="../xsl_functions/geometry_functions/3d_2d_geometry_interface_functions.xsl"/><xsl:include xmlns="http://purl.oclc.org/dsdl/schematron" xmlns:math="http://www.w3.org/2005/xpath-functions/math" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" href="../xsl_functions/geometry_functions/geometry_interface_functions.xsl"/><xsl:include xmlns="http://purl.oclc.org/dsdl/schematron" xmlns:math="http://www.w3.org/2005/xpath-functions/math" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" href="../xsl_functions/geometry_functions/line_interface_functions.xsl"/><xsl:include xmlns="http://purl.oclc.org/dsdl/schematron" xmlns:math="http://www.w3.org/2005/xpath-functions/math" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" href="../xsl_functions/geometry_functions/line_functions.xsl"/><xsl:include xmlns="http://purl.oclc.org/dsdl/schematron" xmlns:math="http://www.w3.org/2005/xpath-functions/math" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" href="../xsl_functions/geometry_functions/depth_functions.xsl"/><xsl:include xmlns="http://purl.oclc.org/dsdl/schematron" xmlns:math="http://www.w3.org/2005/xpath-functions/math" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" href="../xsl_functions/geometry_functions/depth_interface_functions.xsl"/><mode use-accumulators=""/><mode name="group.d13e114" on-no-match="shallow-skip" streamable="false" use-accumulators=""/><template match="*" mode="group.d13e114" priority="-10"><apply-templates select="@*" mode="#current"/><apply-templates select="node()" mode="#current"/></template><template match="//nlcs:NLCSnetbeheerType" mode="group.d13e114" priority="9"><param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="()"/><variable name="Q{http://dmaus.name/ns/2023/schxslt}rule-context" as="node()" select="."/><choose><when test="'d13e114' = $Q{http://dmaus.name/ns/2023/schxslt}pattern"><svrl:suppresed-rule context="//nlcs:NLCSnetbeheerType"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:suppresed-rule><next-match/></when><otherwise><svrl:fired-rule context="//nlcs:NLCSnetbeheerType"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:fired-rule><for-each select="."><variable name="rule_number" select="1"/><variable name="nlcs_objects" select="*[not(self::nlcs:VersieNummer or self::nlcs:AprojectReferentie)]"/><variable name="aprojectreferenties" select="nlcs:AprojectReferentie"/><if test="not(count($aprojectreferenties) = 1)"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="file-has-aprojectreferentie" severity="Fout" test="count($aprojectreferenties) = 1"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation('aprojectreferentie-not-present')"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if><if test="not(count($nlcs_objects) &gt; 0)"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="file-has-nlcs-objects" severity="Fout" test="count($nlcs_objects) &gt; 0"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="scope"><svrl:text>Eindrevisie alle bedrijfstoestanden</svrl:text></svrl:property-reference><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation('no-nlcs-objects-present')"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if></for-each><next-match><with-param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="('d13e114', $Q{http://dmaus.name/ns/2023/schxslt}pattern)"/></next-match></otherwise></choose></template><template match="//nlcs:NLCSnetbeheerType/*" mode="group.d13e114" priority="8"><param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="()"/><variable name="Q{http://dmaus.name/ns/2023/schxslt}rule-context" as="node()" select="."/><choose><when test="'d13e136' = $Q{http://dmaus.name/ns/2023/schxslt}pattern"><svrl:suppresed-rule context="//nlcs:NLCSnetbeheerType/*"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:suppresed-rule><next-match/></when><otherwise><svrl:fired-rule context="//nlcs:NLCSnetbeheerType/*"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:fired-rule><for-each select="."><variable name="rule_number" select="2"/><variable name="object_type" select="name(.)"/><variable name="object_id" select="nlcs:Handle"/><variable name="is_nlcs_object" select="$object_type ne 'AprojectReferentie' and $object_type ne 'VersieNummer'"/><variable name="tekening_type" select="string(//nlcs:AprojectReferentie/nlcs:TekeningType)"/><variable name="status" select="nlcs:Status"/><variable name="allowed_statuses" select="                 if ($tekening_type = 'BESTAANDE SITUATIE') then                     ['BESTAAND']                 else if ($tekening_type = 'DEELREVISIE') then                     ['BESTAAND', 'NIEUW', 'REVISIE', 'VERWIJDERD', 'TIJDELIJK']                 else if ($tekening_type = 'DEFINITIEF ONTWERP') then                     ['BESTAAND', 'NIEUW', 'REVISIE', 'VERWIJDERD', 'TIJDELIJK']                 else if ($tekening_type = 'EINDREVISIE') then                     ['BESTAAND', 'NIEUW', 'REVISIE', 'VERWIJDERD']                 else if ($tekening_type = 'VOORONTWERP') then                     []                 else                     []             "/><variable name="status_is_allowed" select="some $allowed_status in $allowed_statuses satisfies $allowed_status = $status"/><if test="not(not($is_nlcs_object) or $status_is_allowed)"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="nlcs-object-has-allowed-status" severity="Fout" test="not($is_nlcs_object) or $status_is_allowed"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="scope"><svrl:text>Eindrevisie alle bedrijfstoestanden</svrl:text></svrl:property-reference><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-type"><svrl:text>
         <value-of select="$object_type"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-id"><svrl:text>
         <value-of select="$object_id"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation-and-replace-placeholders('invalid-status-for-tekening-type', [$status, $tekening_type, string-join($allowed_statuses, ', ')])"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if></for-each><next-match><with-param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="('d13e136', $Q{http://dmaus.name/ns/2023/schxslt}pattern)"/></next-match></otherwise></choose></template><template match="//nlcs:MSmof | //nlcs:MSoverdrachtspunt" mode="group.d13e114" priority="7"><param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="()"/><variable name="Q{http://dmaus.name/ns/2023/schxslt}rule-context" as="node()" select="."/><choose><when test="'d13e165' = $Q{http://dmaus.name/ns/2023/schxslt}pattern"><svrl:suppresed-rule context="//nlcs:MSmof | //nlcs:MSoverdrachtspunt"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:suppresed-rule><next-match/></when><otherwise><svrl:fired-rule context="//nlcs:MSmof | //nlcs:MSoverdrachtspunt"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:fired-rule><for-each select="."><variable name="project_area_pos_list" select="tokenize(normalize-space(//nlcs:AprojectReferentie/nlcs:Geometry/gml:Polygon/gml:exterior/gml:LinearRing/gml:posList))"/><variable name="point_pos" select="tokenize(normalize-space((nlcs:Geometry/gml:Point/gml:pos)))"/><variable name="rule_number" select="3"/><variable name="object_type" select="name(.)"/><variable name="object_id" select="nlcs:Handle"/><variable name="geometry_3d" select="$point_pos"/><if test="not(keronic:point-3d-interacts-with-area-2d($point_pos, $project_area_pos_list))"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="assert-point-inside-project-area" severity="Fout" test="keronic:point-3d-interacts-with-area-2d($point_pos, $project_area_pos_list)"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="scope"><svrl:text>Eindrevisie alle bedrijfstoestanden</svrl:text></svrl:property-reference><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-type"><svrl:text>
         <value-of select="$object_type"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-id"><svrl:text>
         <value-of select="$object_id"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="geometry-3d"><svrl:text>
         <value-of select="$geometry_3d"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation('object-outside-project-area')"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if></for-each><next-match><with-param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="('d13e165', $Q{http://dmaus.name/ns/2023/schxslt}pattern)"/></next-match></otherwise></choose></template><template match="//nlcs:MSkabel | //nlcs:Amantelbuis | //nlcs:Akunstwerk | //nlcs:EAarddraad | //nlcs:Aaanlegtechniek" mode="group.d13e114" priority="6"><param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="()"/><variable name="Q{http://dmaus.name/ns/2023/schxslt}rule-context" as="node()" select="."/><choose><when test="'d13e165' = $Q{http://dmaus.name/ns/2023/schxslt}pattern"><svrl:suppresed-rule context="//nlcs:MSkabel | //nlcs:Amantelbuis | //nlcs:Akunstwerk | //nlcs:EAarddraad | //nlcs:Aaanlegtechniek"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:suppresed-rule><next-match/></when><otherwise><svrl:fired-rule context="//nlcs:MSkabel | //nlcs:Amantelbuis | //nlcs:Akunstwerk | //nlcs:EAarddraad | //nlcs:Aaanlegtechniek"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:fired-rule><for-each select="."><variable name="project_area_pos_list" select="tokenize(normalize-space(//nlcs:AprojectReferentie/nlcs:Geometry/gml:Polygon/gml:exterior/gml:LinearRing/gml:posList))"/><variable name="line_pos_list" select="tokenize(normalize-space((nlcs:Geometry/gml:LineString/gml:posList)))"/><variable name="rule_number" select="3"/><variable name="object_type" select="name(.)"/><variable name="object_id" select="nlcs:Handle"/><variable name="geometry_3d" select="$line_pos_list"/><if test="not(keronic:line-3d-interacts-with-area-2d($line_pos_list, $project_area_pos_list))"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="assert-line-inside-project-area" severity="Fout" test="keronic:line-3d-interacts-with-area-2d($line_pos_list, $project_area_pos_list)"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="scope"><svrl:text>Eindrevisie alle bedrijfstoestanden</svrl:text></svrl:property-reference><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-type"><svrl:text>
         <value-of select="$object_type"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-id"><svrl:text>
         <value-of select="$object_id"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="geometry-3d"><svrl:text>
         <value-of select="$geometry_3d"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation('object-outside-project-area')"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if></for-each><next-match><with-param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="('d13e165', $Q{http://dmaus.name/ns/2023/schxslt}pattern)"/></next-match></otherwise></choose></template><template match="//nlcs:MSstation | //nlcs:ABeschermingsvlak" mode="group.d13e114" priority="5"><param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="()"/><variable name="Q{http://dmaus.name/ns/2023/schxslt}rule-context" as="node()" select="."/><choose><when test="'d13e165' = $Q{http://dmaus.name/ns/2023/schxslt}pattern"><svrl:suppresed-rule context="//nlcs:MSstation | //nlcs:ABeschermingsvlak"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:suppresed-rule><next-match/></when><otherwise><svrl:fired-rule context="//nlcs:MSstation | //nlcs:ABeschermingsvlak"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:fired-rule><for-each select="."><variable name="project_area_pos_list" select="tokenize(normalize-space(//nlcs:AprojectReferentie/nlcs:Geometry/gml:Polygon/gml:exterior/gml:LinearRing/gml:posList))"/><variable name="area_pos_list" select="tokenize(normalize-space((nlcs:Geometry/gml:Polygon/gml:exterior/gml:LinearRing/gml:posList)))"/><variable name="rule_number" select="3"/><variable name="object_type" select="name(.)"/><variable name="object_id" select="nlcs:Handle"/><variable name="geometry_2d" select="$area_pos_list"/><if test="not(keronic:area-2d-interacts-with-area-2d($area_pos_list, $project_area_pos_list))"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="assert-area-interacts-with-project-area" severity="Fout" test="keronic:area-2d-interacts-with-area-2d($area_pos_list, $project_area_pos_list)"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="scope"><svrl:text>Eindrevisie alle bedrijfstoestanden</svrl:text></svrl:property-reference><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-type"><svrl:text>
         <value-of select="$object_type"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-id"><svrl:text>
         <value-of select="$object_id"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="geometry-2d"><svrl:text>
         <value-of select="$geometry_2d"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation('object-outside-project-area')"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if></for-each><next-match><with-param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="('d13e165', $Q{http://dmaus.name/ns/2023/schxslt}pattern)"/></next-match></otherwise></choose></template><template match="//nlcs:ABeschermingvlak | //nlcs:MSstation | //nlcs:Akunstwerk" mode="group.d13e114" priority="4"><param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="()"/><variable name="Q{http://dmaus.name/ns/2023/schxslt}rule-context" as="node()" select="."/><choose><when test="'d13e236' = $Q{http://dmaus.name/ns/2023/schxslt}pattern"><svrl:suppresed-rule context="//nlcs:ABeschermingvlak | //nlcs:MSstation | //nlcs:Akunstwerk"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:suppresed-rule><next-match/></when><otherwise><svrl:fired-rule context="//nlcs:ABeschermingvlak | //nlcs:MSstation | //nlcs:Akunstwerk"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:fired-rule><for-each select="."><variable name="geometry" select="tokenize(normalize-space(nlcs:Geometry/gml:Polygon/gml:exterior/gml:LinearRing/gml:posList))"/><variable name="geometry_doubles" select="for $v in $geometry return xs:double($v)"/><variable name="coords_amount" select="count($geometry) idiv 3"/><variable name="coords" select="for $v in $geometry return xs:double($v)"/><variable name="distances" select="                     for $i in 1 to $coords_amount - 1                     return keronic:point-3d-to-point-3d-distance(                               $coords[(3 * $i) - 2], $coords[(3 * $i) - 1], $coords[(3 * $i)],                               $coords[(3 * ($i + 1)) - 2], $coords[(3 * ($i + 1)) - 1], $coords[(3 * ($i + 1))]                          )                "/><variable name="rule_number" select="4"/><variable name="object_type" select="name(.)"/><variable name="object_id" select="nlcs:Handle"/><if test="not(not(some $d in $distances satisfies $d le 10 or $d ge 50))"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="assert-area-meets-length-demand" severity="Fout" test="not(some $d in $distances satisfies $d le 10 or $d ge 50)"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="scope"><svrl:text>Eindrevisie alle bedrijfstoestanden</svrl:text></svrl:property-reference><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-type"><svrl:text>
         <value-of select="$object_type"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-id"><svrl:text>
         <value-of select="$object_id"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation('line-segment-measurement-incorrect')"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if></for-each><next-match><with-param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="('d13e236', $Q{http://dmaus.name/ns/2023/schxslt}pattern)"/></next-match></otherwise></choose></template><template match="//nlcs:MSkabel | //nlcs:EAarddraad | //nlcs:AaanlegTechniek" mode="group.d13e114" priority="3"><param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="()"/><variable name="Q{http://dmaus.name/ns/2023/schxslt}rule-context" as="node()" select="."/><choose><when test="'d13e264' = $Q{http://dmaus.name/ns/2023/schxslt}pattern"><svrl:suppresed-rule context="//nlcs:MSkabel | //nlcs:EAarddraad | //nlcs:AaanlegTechniek"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:suppresed-rule><next-match/></when><otherwise><svrl:fired-rule context="//nlcs:MSkabel | //nlcs:EAarddraad | //nlcs:AaanlegTechniek"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:fired-rule><for-each select="."><variable name="geometry" select="tokenize(normalize-space(nlcs:Geometry/gml:LineString/gml:posList))"/><variable name="geometry_doubles" select="for $v in $geometry return xs:double($v)"/><variable name="coords_amount" select="count($geometry) idiv 3"/><variable name="coords" select="for $v in $geometry return xs:double($v)"/><variable name="distances" select="                     for $i in 1 to $coords_amount - 1                     return keronic:point-3d-to-point-3d-distance(                               $coords[(3 * $i) - 2], $coords[(3 * $i) - 1], $coords[(3 * $i)],                               $coords[(3 * ($i + 1)) - 2], $coords[(3 * ($i + 1)) - 1], $coords[(3 * ($i + 1))]                          )                "/><variable name="rule_number" select="4"/><variable name="object_type" select="name(.)"/><variable name="object_id" select="nlcs:Handle"/><if test="not(not(some $d in $distances satisfies $d le 100 or $d ge 500))"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="assert-line-meets-length-demand" severity="Fout" test="not(some $d in $distances satisfies $d le 100 or $d ge 500)"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-type"><svrl:text>
         <value-of select="$object_type"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-id"><svrl:text>
         <value-of select="$object_id"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation('line-segment-measurement-incorrect')"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if><if test="not(not(keronic:line-3d-contains-larger-angle-than($geometry, '45')))"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="assert-line-meets-angle-demand" severity="Fout" test="not(keronic:line-3d-contains-larger-angle-than($geometry, '45'))"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="scope"><svrl:text>Eindrevisie alle bedrijfstoestanden</svrl:text></svrl:property-reference><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-type"><svrl:text>
         <value-of select="$object_type"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-id"><svrl:text>
         <value-of select="$object_id"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation('line-angle-larger-than-45')"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if></for-each><next-match><with-param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="('d13e264', $Q{http://dmaus.name/ns/2023/schxslt}pattern)"/></next-match></otherwise></choose></template><template match="//nlcs:MSstation | //nlcs:MSkabel | //nlcs:MSmof | //nlcs:Amantelbuis" mode="group.d13e114" priority="2"><param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="()"/><variable name="Q{http://dmaus.name/ns/2023/schxslt}rule-context" as="node()" select="."/><choose><when test="'d13e297' = $Q{http://dmaus.name/ns/2023/schxslt}pattern"><svrl:suppresed-rule context="//nlcs:MSstation | //nlcs:MSkabel | //nlcs:MSmof | //nlcs:Amantelbuis"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:suppresed-rule><next-match/></when><otherwise><svrl:fired-rule context="//nlcs:MSstation | //nlcs:MSkabel | //nlcs:MSmof | //nlcs:Amantelbuis"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:fired-rule><for-each select="."><variable name="statuses-requiring-ids" select="keronic:get-statuses-where-gisid-required()"/><variable name="status-requires-ids" select="some $status in ($statuses-requiring-ids) satisfies($status = nlcs:Status)"/><variable name="object-has-gis-id" select="keronic:element-exists-and-not-empty(nlcs:GisId)"/><variable name="object-has-asset-id" select="keronic:element-exists-and-not-empty(nlcs:AssetId)"/><variable name="rule_number" select="5"/><variable name="object_type" select="name(.)"/><variable name="object_id" select="nlcs:Handle"/><if test="not(not($status-requires-ids) or ($object-has-gis-id and $object-has-asset-id))"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="gisid-assetid-not-unset-if-revision-existing" severity="Fout" test="not($status-requires-ids) or ($object-has-gis-id and $object-has-asset-id)"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="scope"><svrl:text>Eindrevisie alle bedrijfstoestanden</svrl:text></svrl:property-reference><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-type"><svrl:text>
         <value-of select="$object_type"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-id"><svrl:text>
         <value-of select="$object_id"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation-and-replace-placeholders('gisid-assetid-not-unset-if-new-revision-existing', [string-join($statuses-requiring-ids, ', ')])"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if><if test="not($status-requires-ids or not($object-has-gis-id or $object-has-asset-id))"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="gisid-assetid-are-unset-if-new" severity="Fout" test="$status-requires-ids or not($object-has-gis-id or $object-has-asset-id)"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="scope"><svrl:text>Eindrevisie alle bedrijfstoestanden</svrl:text></svrl:property-reference><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-type"><svrl:text>
         <value-of select="$object_type"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-id"><svrl:text>
         <value-of select="$object_id"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation-and-replace-placeholders('gisid-assetid-are-unset-if-new', [string-join($statuses-requiring-ids, ', ')])"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if></for-each><next-match><with-param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="('d13e297', $Q{http://dmaus.name/ns/2023/schxslt}pattern)"/></next-match></otherwise></choose></template><template match="//nlcs:MSstation | //nlcs:MSkabel | //nlcs:MSmof | //nlcs:MSoverdrachtspunt | //nlcs:Amantelbuis" mode="group.d13e114" priority="1"><param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="()"/><variable name="Q{http://dmaus.name/ns/2023/schxslt}rule-context" as="node()" select="."/><choose><when test="'d13e328' = $Q{http://dmaus.name/ns/2023/schxslt}pattern"><svrl:suppresed-rule context="//nlcs:MSstation | //nlcs:MSkabel | //nlcs:MSmof | //nlcs:MSoverdrachtspunt | //nlcs:Amantelbuis"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:suppresed-rule><next-match/></when><otherwise><svrl:fired-rule context="//nlcs:MSstation | //nlcs:MSkabel | //nlcs:MSmof | //nlcs:MSoverdrachtspunt | //nlcs:Amantelbuis"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:fired-rule><for-each select="."><variable name="rule_number" select="6"/><variable name="object_type" select="name(.)"/><variable name="object_id" select="nlcs:Handle"/><if test="not(keronic:element-exists-and-not-empty(nlcs:Inmeetwijze))"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="elec-object-has-inmeetwijze" severity="Fout" test="keronic:element-exists-and-not-empty(nlcs:Inmeetwijze)"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="scope"><svrl:text>Eindrevisie alle bedrijfstoestanden</svrl:text></svrl:property-reference><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-type"><svrl:text>
         <value-of select="$object_type"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-id"><svrl:text>
         <value-of select="$object_id"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation-and-replace-placeholders('attribute-not-present', ['Inmeetwijze'])"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if><if test="not(keronic:element-exists-and-not-empty(nlcs:Nauwkeurigheid))"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="elec-object-has-nauwkeurigheid" severity="Fout" test="keronic:element-exists-and-not-empty(nlcs:Nauwkeurigheid)"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="scope"><svrl:text>Eindrevisie alle bedrijfstoestanden</svrl:text></svrl:property-reference><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-type"><svrl:text>
         <value-of select="$object_type"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-id"><svrl:text>
         <value-of select="$object_id"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation-and-replace-placeholders('attribute-not-present', ['Nauwkeurigheid'])"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if></for-each><next-match><with-param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="('d13e328', $Q{http://dmaus.name/ns/2023/schxslt}pattern)"/></next-match></otherwise></choose></template><template match="//nlcs:MSkabel | //nlcs:LSkabel | nlcs:LSmof" mode="group.d13e114" priority="0"><param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="()"/><variable name="Q{http://dmaus.name/ns/2023/schxslt}rule-context" as="node()" select="."/><choose><when test="'d13e350' = $Q{http://dmaus.name/ns/2023/schxslt}pattern"><svrl:suppresed-rule context="//nlcs:MSkabel | //nlcs:LSkabel | nlcs:LSmof"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:suppresed-rule><next-match/></when><otherwise><svrl:fired-rule context="//nlcs:MSkabel | //nlcs:LSkabel | nlcs:LSmof"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if></svrl:fired-rule><for-each select="."><variable name="rule_number" select="7"/><variable name="object_type" select="name(.)"/><variable name="object_id" select="nlcs:Handle"/><if test="not(keronic:element-exists-and-not-empty(nlcs:Subnettype))"><variable name="failed-assert" as="element(svrl:failed-assert)"><svrl:failed-assert id="subnettype-present" severity="Fout" test="keronic:element-exists-and-not-empty(nlcs:Subnettype)"><attribute name="location" select="path($Q{http://dmaus.name/ns/2023/schxslt}rule-context)"/><svrl:property-reference property="scope"><svrl:text>Eindrevisie alle bedrijfstoestanden</svrl:text></svrl:property-reference><svrl:property-reference property="rule-number"><svrl:text>
         <value-of select="$rule_number"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-type"><svrl:text>
         <value-of select="$object_type"/>
      </svrl:text></svrl:property-reference><svrl:property-reference property="object-id"><svrl:text>
         <value-of select="$object_id"/>
      </svrl:text></svrl:property-reference><svrl:text>
            <value-of select="keronic:get-translation-and-replace-placeholders('attribute-not-present', ['Subnettype'])"/>
         </svrl:text></svrl:failed-assert></variable><sequence select="$failed-assert"/></if></for-each><next-match><with-param name="Q{http://dmaus.name/ns/2023/schxslt}pattern" as="Q{http://www.w3.org/2001/XMLSchema}string*" select="('d13e350', $Q{http://dmaus.name/ns/2023/schxslt}pattern)"/></next-match></otherwise></choose></template><template match="root()" as="element(svrl:schematron-output)"><svrl:schematron-output phase="#ALL"><svrl:ns-prefix-in-attribute-values prefix="keronic" uri="http://example.com/my-functions"/><svrl:ns-prefix-in-attribute-values prefix="gml" uri="http://www.opengis.net/gml/3.2"/><svrl:ns-prefix-in-attribute-values prefix="xs" uri="http://www.w3.org/2001/XMLSchema"/><svrl:ns-prefix-in-attribute-values prefix="nlcs" uri="NLCSnetbeheer"/><!--SchXslt2 Core 1.4.4--><try><svrl:active-pattern id="v11-aprojectreferentie-has-other-objects"><attribute name="documents" select="document-uri(.)"/></svrl:active-pattern><svrl:active-pattern id="v11-statuses-allowed-for-tekening-type"><attribute name="documents" select="document-uri(.)"/></svrl:active-pattern><svrl:active-pattern id="v11-all-geometries-in-project-area"><attribute name="documents" select="document-uri(.)"/></svrl:active-pattern><svrl:active-pattern id="v11-areas-meet-demands"><attribute name="documents" select="document-uri(.)"/></svrl:active-pattern><svrl:active-pattern id="v11-lines-meet-demands"><attribute name="documents" select="document-uri(.)"/></svrl:active-pattern><svrl:active-pattern id="v11-gisid-assetid-check"><attribute name="documents" select="document-uri(.)"/></svrl:active-pattern><svrl:active-pattern id="v11-elec-assets-have-measurement-details"><attribute name="documents" select="document-uri(.)"/></svrl:active-pattern><svrl:active-pattern id="v11-cables-have-subnettype"><attribute name="documents" select="document-uri(.)"/></svrl:active-pattern><apply-templates select="." mode="group.d13e114"/><catch><svrl:error code="{$Q{http://www.w3.org/2005/xqt-errors}code}"><if test="document-uri()"><attribute name="document" select="document-uri()"/></if><if test="$Q{http://www.w3.org/2005/xqt-errors}description"><value-of select="$Q{http://www.w3.org/2005/xqt-errors}description"/></if></svrl:error><variable name="message" as="Q{http://www.w3.org/2001/XMLSchema}string+" expand-text="yes">
                  Running the ISO Schematron validation failed with a dynamic error.
                  Error code: {$Q{http://www.w3.org/2005/xqt-errors}code} Reason: {$Q{http://www.w3.org/2005/xqt-errors}description}
                </variable><message terminate="yes" error-code="Q{{http://dmaus.name/ns/2023/schxslt}}ValidationError"><text/><value-of select="normalize-space(string-join($message))"/></message></catch></try></svrl:schematron-output></template></stylesheet>
